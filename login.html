<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
    <link href="css/styles.css" rel="stylesheet" />



    <title>Login Page</title>
</head>
<body>
    <section class="page-section logs" id="logs">
        <div class="container">
            <!-- Integration Section Heading-->
            <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Login</h2>
            <!-- Icon Divider-->
            <div class="divider-custom">
                <div class="divider-custom-line"></div>
                <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                <div class="divider-custom-line"></div>
            </div>
        </div>
    </section>
    <div class="container-md mb-4 justify-content-center">
        <div class="mb-4">
            <form class="form-inline" method="post" id="userLogin">
                <!-- Email input -->
                <div class="form-outline mb-4">
                  <input name="username" type="text" id="userUserName" class="form-control" style="margin-top: 10%;" required/>
                  <label class="form-label" for="form2Example1">Username</label>
                </div>
              
                <!-- Password input -->
                <div class="form-outline mb-4">
                  <input name="password" type="password" id="userPassword" class="form-control" required/>
                  <label class="form-label" for="form2Example2">Password</label>
                </div>
              
    
    
              
                <!-- Submit button -->
                <div div class="col-md-12 text-center">
                    <button id="LogInButton" type="submit" class="btn btn-primary btn-block mb-4"\>Sign in</button>
                </div>  
              </form>
              <script>
                  userLogin.onsubmit = async (e) => {
                                                e.preventDefault();
                                                let response = await fetch('https://pacific-oasis-42903.herokuapp.com/login', {
                                                    method: 'POST',
                                                    body: new FormData(userLogin)
                                                    }
                                                );
                                                if (response.status === 202) {
                                                    sessionStorage.setItem("username", document.getElementById("userUserName").value)
                                                    sessionStorage.setItem("password", document.getElementById("userPassword").value)
                                                    sessionStorage.setItem("AuthenticationState", "Authenticated")
                                                    location.href = "index.html"
                                                }
                                                if (response.status === 404) {
                                                    alert("User Not Found")
                                                }
                                                if (response.status === 400) {
                                                    alert("Invalid Credentials")
                                                }
                                                
                                            };
              </script>
        </div>
        
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>